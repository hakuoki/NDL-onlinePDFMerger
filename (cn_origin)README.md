# 📚 NDL-onlinePDFMerger 使用说明
这个脚本用于将从 国立国会图书馆数字馆藏网站（NDL online） 下载的 PDF 文件进行合并与分类整理。
---

## 🪜 使用步骤
### 1. 📁 准备文件夹
请准备两个文件夹：

source_path：用于存放从 NDL 网站下载的原始 PDF 文件。

library_path：用于保存最终合并后的 PDF 文件。

### 2. 🛠 指定路径
在脚本中填写对应的文件夹路径：

```
source_path = '你下载原始PDF的文件夹路径'
library_path = '你希望保存合并后PDF的文件夹路径'
```

### 3. 📥 PDF 的下载方式（重点）
根据资料的不同类型，下载方法略有差异：

✅ 有登录权限或“个人发送”资料的情况
点击“打印”，选择 每次最多 50 页的方式下载（如：1–50，51–100，101–150……）

右键点击“打开 PDF 文件” → 选择「目标另存为」来保存。
（这样保存的文件包含完整元数据，且不会给服务器带来多余负担。）

✅ 无需登录即可查看的资料
可直接点击底部的“下载”按钮，选择所有图幅，整体保存。

### 4. 📎 执行合并与整理（运行 Python 脚本）
运行脚本 NDL-onlinePDFMerger.py，它会执行以下任务：

## 🔧 合并规则说明
✅ 1. 按永续识别码（NDL ID）进行合并
脚本会根据每份资料的唯一 NDL ID 对 PDF 进行归类和合并。

✅ 2. 文件排序
使用下载时自动加在文件名中的【括号内数字】来排序各部分，例如：

```
digidepo_1234567_ (1).pdf, (2).pdf, (3).pdf...
```
✅ 3. 元数据继承
最早保存的那一份（没有括号数字的 PDF 文件）中包含的元数据，会复制到合并后的文件中。

✅ 4. 文件命名规则
合并后的文件命名方式如下：

```
merged_file_name = 'digidepo_' + ndl_id + '_merged.pdf'
```
## 🗂 PDF 分类与输出路径规则
✅ 使用 metadata 中的 Keywords 字段
该字段包含作者、标题、出版社、出版年份等信息。

脚本会自动读取并创建如下格式的文件夹：


library_path/
└── 出版社名/
    └── 出版社_出版年_NDLID_作者+标题/
        └── 合并后的 PDF 文件
举例：

```
D:/library_output/
└── 中央公論社/
    └── 中央公論社_昭和10_1234567_矢田插雲 著『太閤記』第9巻/
        └── digidepo_1234567_merged.pdf
```